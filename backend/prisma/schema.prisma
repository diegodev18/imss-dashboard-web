generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model companies {
  id         Int            @id @default(autoincrement())
  name       String
  legal_name String         @unique
  rfc        String         @unique
  status     company_status @default(pending)
  created_at DateTime?      @default(now()) @db.Timestamp(6)
  user_name  String         @unique
  password   String
}

model employees {
  id                     Int              @id @default(autoincrement())
  full_name              String
  curp                   String           @unique
  rfc                    String           @unique
  position               String
  salary                 Decimal          @db.Decimal(10, 2)
  status                 employees_status @default(active)
  created_by             Int
  created_at             DateTime?        @default(now()) @db.Timestamp(6)
  social_security_number String           @unique
}

model bot_sessions {
  id            Int       @id @default(autoincrement())
  auth_token    String?   @unique @default(dbgenerated("\"substring\"(encode(gen_random_bytes(9), 'base64'::text), 1, 12)"))
  used          Boolean?  @default(false)
  created_by    Int
  created_at    DateTime? @default(now()) @db.Timestamp(6)
  chat_id       String?
  chat_metadata Json?     @default("{}")
}

enum company_status {
  active
  inactive
  pending
}

enum employees_status {
  active
  inactive
}
